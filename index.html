<!DOCTYPE html>
<html lang="fr-FR" dir="ltr">
	<head>

		<meta charset="UTF-8" />

		<meta property="og:title"			content=" 🖼️ BingWall 🖼️ " />
		<meta property="og:description"		content="Chaque jour de nouvelles photo 🤩" />
		<meta property="og:url"				content="https://strategfirst.github.io/BingWall/" />
		<meta property="og:image"			content="https://github.com/StrategFirst/BingWall/raw/main/banner.png" />
		<meta property="og:locale" 			content="fr_FR" />
		<meta property="og:image:type" 		content="image/png" />
		<meta property="og:image:width" 	content="1024" />
		<meta property="og:image:height"	content="824" />
		<meta property="og:image:alt"		content="App banner, with famous windows landscape with fake bing watermark over it" />
		
		<meta name="theme-color"			content="#4079F0" data-react-helmet="true"  />
		<meta name="twitter:card"			content="https://github.com/StrategFirst/BingWall/raw/main/banner.png"  />

		<title> BingWall </title>

	<style>
	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
		border: none;
	}
	  
	html {
		background-color: black;
		color: #EEE;
	}
	  
	body {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-content: center;
		text-align: center;
	}

	main {
		display: grid;
		grid-template-columns: repeat(auto-fit, 25rem);
		grid-gap: 1rem;
		justify-content: center;
		align-content: center;
	}
	  
	img {
		width: 100%;
	}

	header {
		font-family: monospace;
		margin: 1rem;
	}

	
	a {
		color: inherit;
		text-decoration-style: dashed;
		text-decoration-line: underline;
		text-decoration-color: #EEE;
	}

	</style>
</head>
<body>
	<header>
		<h1> Daily images from bing </h1>
		<p> Today's image only, the previous ones are available <a href="https://github.com/StrategFirst/BingWall/actions/workflows/daily-scrap.yml">here</a>
	</header>

	<aside>
		Chargement des images...
	</aside>

	<main>
	<script>

		function toImageDom( path , name ) {
			let domElem = document.createElement('img')
			domElem.src = path;
			domElem.alt = `Picture of ${name}, from Bings dailys images`;
			domElem.title = name;
			return domElem;
		}

		fetch('./resources/list.txt')
			.then( response => response.text() )
			.then( text => text.split`\n` )
			.then( data => data.filter( line => line != '' && line != 'list.txt' ) )
			.then( data => data.map( filename => [ filename , filename.replace(/\.webp/,'')  ] ) )
			.then( paths => paths.map( (args) => toImageDom(...args) ) )
			.then( domElements => domElements.forEach( domElement => document.querySelector('main').appendChild(domElement) ) )
			.then( () => document.querySelector('aside').style.display = 'none' )

		fetch('./resources/metadata.json')
			.then( response => response.json() )
			.then( console.table )
	</script>
	</main>

</body>
</html>
		